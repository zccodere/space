# 线程安全性

一个类是线程安全的，是指在被多个线程访问时，类可以持续进行正确的行为。

>当多个线程访问一个类时，如果不用考虑这些线程在运行时环境下的调度和交替执行，
并且不需要额外的同步及在调用方代码不必作其他的协调，这个类的行为仍然是正确的，
那么称这个类是线程安全的。

# 内部锁

Java提供了强制原子性的内置锁机制：synchronized 块

每个Java对象都可以隐式地扮演一个用于同步的锁的角色；这些内置的锁被称为内部锁或监视器锁。

内部锁是互斥锁

>互斥锁：意味着至多只有一个线程可以拥有锁

内部锁是可重入的

>可重入的：当一个线程请求其他线程已经占有的锁时，请求线程将被阻塞。
然后，内部锁是可重进入的，因此线程在试图获得它自己占有的锁时，请求会成功。

>重进入的实现是通过为每个锁关联一个请求计数和一个占有它的线程。
当计数为0时，认为锁是未被占有的。线程请求一个未被占有的锁时，JVM将记录锁的占有者，并将请求计数置为1。
如果同一个线程再次请求这个锁，计数将递增；每次占用线程退出同步块，计数器值将递减。直到计数器为0时，锁被释放。

